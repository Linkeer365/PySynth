<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>PySynth &mdash; A Music Synthesizer for Python</title>
<style type="text/css">
	body { color: #002eb3;
		background: #e5e0be url(bach2.png) 0 0 repeat fixed;
		font-family: TeXGyreBonum, Sabon, "Sabon LT Std", "Big Caslon", "Gentium Book Basic", "New Century Schoolbook", Times, serif;
		font-size: 12pt;
		line-height: 16pt }
	a:link    { color: #a00 }
	a:visited { color: #500 }
	a:hover   { color: #fff; background: #a00 }
	a:active  { color: #ff0 }
	h2 { font-variant:small-caps }
	pre {
		font-size: 10pt;
		line-height: 12pt
	}

.dot { font-family: SynthetiqueOTRegular;
       font-size: 52pt;
       margin:0px auto;
       padding-top: 20px;
       color: #ff0;
       text-shadow:0 0 6px #f00
}

/* Generated by Font Squirrel (http://www.fontsquirrel.com) on January 8, 2011 01:09:25 PM America/New_York */

@font-face {
	font-family: 'SynthetiqueOTRegular';
	src: url('synthetique/synthetique-webfont.eot');
	src: local('☺'), url('synthetique/synthetique-webfont.woff') format('woff'), url('synthetique/synthetique-webfont.ttf') format('truetype'), url('synthetique/synthetique-webfont.svg#webfontaNBtqWD8') format('svg');
	font-weight: normal;
	font-style: normal;
}

/* Generated by Font Squirrel (http://www.fontsquirrel.com) on January 12, 2011 05:09:35 PM America/New_York */



@font-face {
	font-family: 'TeXGyreBonum';
	src: url('gyre/texgyrebonum-regular-webfont.eot');
	src: local('☺'), url('gyre/texgyrebonum-regular-webfont.woff') format('woff'), url('gyre/texgyrebonum-regular-webfont.ttf') format('truetype'), url('gyre/texgyrebonum-regular-webfont.svg#webfontwUTe3Y7O') format('svg');
	font-weight: normal;
	font-style: normal;
}

@font-face {
	font-family: 'TeXGyreBonum';
	src: url('gyre/texgyrebonum-italic-webfont.eot');
	src: local('☺'), url('gyre/texgyrebonum-italic-webfont.woff') format('woff'), url('gyre/texgyrebonum-italic-webfont.ttf') format('truetype'), url('gyre/texgyrebonum-italic-webfont.svg#webfonteSUpp3GS') format('svg');
	font-weight: normal;
	font-style: italic;
}

@font-face {
	font-family: 'TeXGyreBonum';
	src: url('gyre/texgyrebonum-bold-webfont.eot');
	src: local('☺'), url('gyre/texgyrebonum-bold-webfont.woff') format('woff'), url('gyre/texgyrebonum-bold-webfont.ttf') format('truetype'), url('gyre/texgyrebonum-bold-webfont.svg#webfont82gb6PCB') format('svg');
	font-weight: bold;
	font-style: normal;
}
/*
@font-face {
	font-family: 'TeXGyreBonum';
	src: url('gyre/texgyrebonum-bolditalic-webfont.eot');
	src: local('☺'), url('gyre/texgyrebonum-bolditalic-webfont.woff') format('woff'), url('gyre/texgyrebonum-bolditalic-webfont.ttf') format('truetype'), url('gyre/texgyrebonum-bolditalic-webfont.svg#webfontVUd4kPiA') format('svg');
	font-weight: bold;
	font-style: italic;
}
*/

</style>
</head>
<body bgcolor="#bbceff">
<center><div style="align: center; padding: 25px 0px 10px 0px"><span class="dot">PySynth</span></div></center>
<a href="https://github.com/mdoege/PySynth"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
<p align="center">
<a href="#d">Downloads</a> | 
<a href="#h">Changes</a> | 
<a href="#m">Synthesizer modules</a> | 
<a href="#s">Support scripts</a> | 
<a href="#u">Usage</a> | 
<a href="#l">License</a> | 
<a href="#c">Contact</a>
</p></center>

<p><b>PySynth</b> is a simple music synthesizer written in <a href="http://www.python.org/">Python 3</a>. It&rsquo;s based on a script I found on the Web and then modified for my purposes. The goal is not to produce many different sounds, but to have scripts that can turn <a hreF="http://abcnotation.com/">ABC notation</a> or <a href="https://en.wikipedia.org/wiki/MIDI">MIDI</a> files into a WAV file without too much tinkering.</p>

<p>There are four variants: PySynth A is faster, only needs Python itself, and sounds more like a cross between a flute and organ. PySynth B is more complex in sound and needs <a href="http://numpy.org/">NumPy</a>. It's supposed to be a little closer to a piano. No competition for Pianoteq of course, but a reasonable fit for keyboard music. PySynth E is similar, but an FM-synthesized e-piano so it sounds much brighter than B (slightly DX7 e-piano-like; I used the DX7 presets in <a href="http://dssi.sourceforge.net/hexter.html">hexter</a> as a basis). Finally, PySynth S is more comparable to a guitar, banjo, or harpsichord, depending on note length and pitch.</p>

<p>The current release of the synthesizer is monophonic, i.e. it can only play one note at a time.  (Although successive notes can overlap in PySynth B and S, but not A.)  However, two output files can be mixed together as in the case of the stereo files below.</p>

<p>If you need more powerful Python sound synthesis than PySynth offers, you might want to check out the <a href="https://github.com/belangeo/pyo">Pyo</a> toolkit. To convert complex ABC files to MIDI and synthesize them, you might want to try <a href="https://github.com/leesavide/abcmidi">abcmidi</a> and <a href="http://yoshimi.sourceforge.net/">Yoshimi<a/a>.</p>

<hr>

<h2><a name="e">Audio samples</a></h2>
<p>Here are some WAV output files converted to MP3 or MP4 format:</p>

<ul>
<li>Mono:</li>
<ul>
<li><a href="pysynth_anthem.mp4">American Anthem</a> &mdash; PySynth <b>A</b>
<br><audio src="pysynth_anthem.mp4" controls></audio></li>
<li><a href="pysynth_chopin.mp4">Beginning of a Chopin Nocturne</a> &mdash; PySynth <b>B</b>
<br><audio src="pysynth_chopin.mp4" controls></audio></li>
<li><a href="menuet.mp4">Bach: <i>Menuet in G</i></a> &mdash; PySynth <b>S</b> &sim; <a href="menuet.abc.txt">abc source</a>
<br><audio src="menuet.mp4" controls></audio></li>
<li><a href="sailors_hornpipe.mp4"><i>The Sailor&rsquo;s Hornpipe</i></a> &mdash; PySynth <b>S</b> &sim; <a href="sailor.abc.txt">abc source</a>
<br><audio src="sailors_hornpipe.mp4" controls></audio></li>
</ul>

<li>Stereo:</li>
<ul>
<li><a href="popcorn.mp3">Hot Butter: <i>Popcorn</i></a> &mdash; 8 MIDI tracks mixed in <a href="http://www.audacityteam.org/">Audacity</a>: PySynth <b>A</b>, <b>C</b> (2x), <b>D</b>, <b>E</b>, <b>P</b>, and <b>S</b> (2x)  &sim; <a href="popcorn.txt">shell script</a>
<br><audio src="popcorn.mp3" controls></audio></li>
<li><a href="epiano.mp4">Bach: Invention #13, BWV 784</a> &mdash; PySynth <b>E</b> &sim; <a href="bach_invention_13.abc.txt">abc source</a>
<br><audio src="epiano.mp4" controls></audio></li>
<li><a href="pysynth_bach.mp4">Bach: Bourree from BWV 996</a> &mdash; PySynth <b>B</b>
<br><audio src="pysynth_bach.mp4" controls></audio></li>
<li><a href="jesu.mp4">Bach: <i>Jesu, Joy of Man&rsquo;s Desiring</i></a> &mdash; PySynth <b>S</b> (treble) and <b>B</b> (bass) &sim; <a href="jesu.abc.txt">abc source</a>
<br><audio src="jesu.mp4" controls></audio></li>
</ul>
</ul>
<hr>

<h2><a name="d">Download a stable release</a></h2>

<p>Here are <tt><a href="http://en.wikipedia.org/wiki/Tar_(file_format)">tar.gz</a></tt> archives of all PySynth modules:</p>

<p align="center"><tt><a href="PySynth-2.0.tar.gz">PySynth-2.0.tar.gz</a></tt>&nbsp;<small>(2017-06-11; for Python 3)</small></p>

<p align="center"><tt><a href="PySynth-1.1.tar.gz">PySynth-1.1.tar.gz</a></tt>&nbsp;<small>(2015-01-03; final version for Python 2)</small></p>

<h2><a name="d">Download the git version</a></h2>

<p>You can <a href="https://github.com/mdoege/PySynth">browse the repository</a> at <a href="https://github.com/">GitHub</a> or obtain the source code with <a href="http://git-scm.com/">git</a> like this:<br>&nbsp;&nbsp;<tt>git clone git://github.com/mdoege/PySynth.git</tt></p>

<p><a href="https://github.com/mdoege/PySynth/archive/master.zip">ZIP file of the latest git version of PySynth</a></p>

<h2><a name="d">Arch Linux package (git version)</a></h2>

<p><a href="https://aur.archlinux.org/packages/python-pysynth-git/">AUR package</a>

<hr>

<h2><a name="h">Changes</a></h2>

<p><b>V2.0</b> switches to Python 3, adds the MIDI reader <tt>readmidi.py</tt>, and incorporates several pull requests with bug fixes and improvements.</p>

<p><b>V1.1</b> adds the pysynth_e FM synth module and <tt>mixfiles.py</tt>.</p>

<p><b>V1.0.1</b> fixes a minor issue with Pyglet sound playback and corrects the import path for PyAudio. Thanks again, Pranav!</p>

<p><b>V1.0</b> added interactive song creation and playback via <tt>menv.py</tt>. This CLI allows you to enter notes and hear them played back as synthesized by PySynth. Thanks, Pranav!</p>

<p><b>V0.9</b> introduced a <a href="http://cuu508.wordpress.com/2011/04/12/ringtonesynth/">Nokia ringtone synthesizer</a> module, contributed by <a href="https://github.com/cuu508">P&#275;teris Caune</a>. (Run <tt>nokiacomposer2wav.py</tt> to generate some audio samples.) Thanks, Pete!</p>

<p><b>V0.8</b>: Improved support for ABC notation features such as tuplets and song tempo; better performance and sound of PySynth &ldquo;S&rdquo;.</p>

<p><b>V0.7</b>: Added the ABC parser and the &ldquo;B&rdquo; and &ldquo;S&rdquo; synths.</p>

<p><b>V0.6</b>: Initial public release</p>

<hr>

<h2><a name="m">Synthesizer modules</a></h2>

<p>These modules take a list of notes and note lengths and use it to create a WAV file. The B, E, and S synths also require <a href="http://numpy.org/">NumPy</a>.</p>

<h3>PySynth &ldquo;A&rdquo;</h3>

<p>This additive monophonic synth is very simple and sounds vaguely like a flute or organ, combined with piano-like note volume decay. Only Python itself is needed for PySynth A. It should run on all Python-supported platforms, like Windows, Unix, and the Mac.</p>

<h3>PySynth &ldquo;B&rdquo;</h3>

<p>An additive synth module which attempts to create a more piano-like sound with more harmonics. This version is polyphonic in the sense that it doesn&rsquo;t cut off previous notes when the next note sounds.</p>

<h3>PySynth &ldquo;C&rdquo;</h3>

<p>PySynth C (in latest git) is a simple bowed string sound based on subtractive synthesis. It uses a sawtooth oscillator and a low-pass filter, similar to a 1970s analog synth (or a string sound in <a href="http://amsynth.github.io/">amsynth</a>, or a sound from a <a href="https://en.wikipedia.org/wiki/MOS_Technology_SID">MOS Technology SID</a>). Like PySynth A, it only requires Python itself to run.</p>

<h3>PySynth &ldquo;D&rdquo;</h3>

<p>PySynth D (in latest git) uses subtractive synthesis like PySynth C, but is based on a square wave instead. This synth lead-type sound is reminiscent of a woodwind. Square waves were also used in 1970s/1980s computer sound chips such as the <a href="https://en.wikipedia.org/wiki/General_Instrument_AY-3-8910">General Instrument AY-3-8910</a> or the <a href="https://en.wikipedia.org/wiki/POKEY">Atari POKEY</a>. Only Python itself is required.</p>

<h3>PySynth &ldquo;E&rdquo;</h3>

<p>Based on PySynth B, this module creates a simple e-piano sound based on phase modulation, the usual method of doing FM synthesis e.g. on 1980s Yamaha synthesizers. This sound is of course inspired by the Rhodes piano on a <a href="https://en.wikipedia.org/wiki/Yamaha_DX7">Yamaha DX7</a>.</p>

<h3>PySynth &ldquo;P&rdquo;</h3>

<p>PySynth P (in latest git) uses subtractive synthesis like PySynth C and D, but is based on white noise with an exponential volume envelope. It creates an untuned percussion sound. This type of sound was commonly used in the 1980s for percussive and game sound effects. Only Python itself is required.</p>

<h3>PySynth &ldquo;S&rdquo;</h3>

<p>This module simulates a single plucked string with the <a href="http://en.wikipedia.org/wiki/Karplus-Strong_string_synthesis">Karplus-Strong algorithm</a> (think guitar or harpsichord). Due to the nature of this kind of synthesis, higher frequency-notes in particular can be slightly out of tune with PySynth S, as opposed to the other variants where the harmonics are exact. This could be remedied with a higher sampling rate, but that would also make it a little slow for Python.</p>

<h3>PySynth beeper</h3>

<p>This contributed synth belongs to <tt>nokiacomposer2wav.py</tt> and is supposed to recreate ringtones of vintage Nokia feature phones.</p>

<hr>

<h2><a name="s">Controller &amp; support scripts</a></h2>

<p>These scripts serve as more convenient ways to drive the actual synthesizers.</p>

<h3>ABC parser</h3>

<p>PySynth has some basic support for music in the <a hreF="http://abcnotation.org.uk/">ABC notation language</a>. The script needs the location of the ABC song file (either local or via http), optionally followed by the song number (defaults to 1):</p>

<pre>python3 read_abc.py http://mdoege.github.io/PySynth/LiliMarlen.abc.txt</pre>

<p>&rArr; <a href="marlen.mp4">Lili Marleen.mp4</a></p>

<p>Detailed usage:</p>

<pre>read_abc.py filename [num_song] [--syn_b/--syn_c/--syn_d/--syn_e/--syn_p/--syn_s]

* num_song selects the song in the file corresponding to the number given
* --syn_b, --syn_e, --syn_s, etc. can be added to use other PySynth
    modules instead of the default PySynth A</pre>

<p>If you need a quick way to edit, visualize, and&mdash;in supported browsers&mdash;play an ABC music file, take a look at <a href="http://waterpigs.co.uk/pig/">ABCPig</a>.</p>

<h3>MIDI reader</h3>

<p>Synthesize one track from a MIDI file with PySynth (defaults to MIDI track 1):</p>

<pre>python3 readmidi.py file.mid [tracknum] [file.wav] [--syn_b/--syn_c/--syn_d/--syn_e/--syn_p/--syn_s]</pre>

<h3>Stereo mixer</h3>

<p><tt>mixfiles.py</tt> mixes two mono audio files to create a stereo file, e.g.: <tt>python3 mixfiles.py right.wav left.wav both.wav</tt></p>

<h3>Interactive command line environment</h3>

<p>This feature, contributed by <a href="https://github.com/pranavrc">Pranav Ravichandran</a>, is used by running <tt>menv.py</tt>. It is really self-explaining, you enter your desired notes and any optional parameters like bpm on the command line and after you hit return PySynth synthesizes the sound and plays it back via the speakers. Depending on the speed of your computer and the length of the sound, there might be a slight pause between your input and sound playback.</p>

<p><a href="http://people.csail.mit.edu/hubert/pyaudio/">PyAudio</a> is recommended for playback functionality, but <a href="http://www.pyglet.org/">Pyglet</a>, tkSnack, or a command line audio player of your choice are also supported.</p>

<h3>Nokia ringtone synthesizer</h3>

<p><a href="https://github.com/cuu508">P&#275;teris Caune</a> has implemented <tt>nokiacomposer2wav.py</tt>, which as the name suggests takes a Nokia ringtone and synthesizes it using <tt>pysynth_beeper.py</tt>. <tt>nokiacomposer2wav.py</tt> also produces some test files when invoked directly.</p>

<hr>

<h2><a name="u">Usage</a></h2>

<p>The script can be used as a module by other Python programs or the interactive Python shell:</p>

<pre>
% <b>python3</b>
>>> <b>import pysynth</b>
>>> <b>test = ( ('c', 4), ('e', 4), ('g', 4), ('c5', 1) )</b>
>>> <b>pysynth.make_wav(test, fn = "test.wav")</b>
Writing to file test.wav
[1/4]

>>> 
</pre>
<p>&hellip;which will give you <a href="test.wav">this timeless masterpiece</a>. That&rsquo;s the C major chord over the middle C followed by the high C. Three quarters, followed by a whole note (which PySynth assumes to equal 4 quarters).</p>

<p>First comes the note name (a to g), then optionally a '#' or 'b' for sharp or flat, then optionally the octave (defaults to 4). An asterisk at the end means to play the note a little louder.</p>

<p>The note duration comes next, with dotted notes represented by negative numbers (e.g. -2 is a dotted half note). 'r' is a rest. So e.g. &ldquo;The Blue Danube&rdquo; starts with:</p>

<pre>
song = (
                       ('c', 4),
  ('c*', 4), ('e', 4), ('g', 4),
  ('g*', 2), ('g5', 4),
  ('g5*', 4), ('r', 4), ('e5', 4),
  ('e5*', 4) 
)

>>> <b>from pysynth_b import *</b>
*** EXPERIMENTAL PIANO VERSION WITH NOTE CACHING ***
>>> <b>make_wav(song, fn = "danube.wav", leg_stac = .7, bpm = 180)</b> &larr; <i>Beats per minute is
                                                                          really </i>quarters<i>
                                                                          per minute here.</i>
[1/10]
[5/10]
[9/10]
Writing to file <a href="danube.wav">danube.wav</a>

>>> 
</pre>

<p>For more convenient note entry, you can e.g. use the <b>ABC notation importer</b>:</p>

<p>This is an example from the <a href="https://web.archive.org/web/20160323214714/http://trillian.mit.edu/~jc/music/abc/doc/ABCprimer.html">ABC documentation</a>:</p>

<pre>
X: 1
T: Balance the Straw
R: jig
N: This tune goes with one of the best-known Morris dances. It is also a good jig
N: for other dances, usually in AABB form. The B phrase bears a strong resemblance
N: to a certain Christmas carol, and at Morris dances you will hear words like:
N: __ Hark! the herald angels sing, __
N: __ Glory to the Morris Ring. __
N: Sometimes assorted other things are praised by the angels.
N:
M: 6/8
L: 1/8
K: G
D \
|: "G"G2B B>AB | "C"c2A A>ce | "D7"d>ed cAc | "G"G2B B2D \
|  "G"G2B B>AB | "C"c2A A>ce | "D7"d>ed cEF | "G"G4 z2 :|
B/c/ \
|: "G"dz d dz G | "(D7)"c2B "D7"B2A |  "G"dz d dz G | "D7"B2A A2D \
|  "G"G2B B>AB | "C"c2A A>ce | "D7"d>ed cEF | "G"G4 z2 :|
</pre>

<p>Creating the audio with:</p>

<pre>python3 read_abc.py straw.abc</pre>

<p>gives you <a href="straw.mp4">this file</a>.</p>

<hr>

<h3><a name="l">License</a></h3>

<p>This software is provided under the <a href="http://www.gnu.org/copyleft/gpl.html">GPL</a>.</p>

<h3><a name="c">Contact</a></h3>

<p>Email: <a href="mailto:mdoege@compuserve.com?subject=PySynth">Martin C. Doege</a></p>

<hr>

<h3>Sample program output</h3>

<pre>
% <b>time python3 pysynth.py</b>
Piano key frequencies (for equal temperament):
Key number      Scientific name Frequency (Hz)
         1                   A0          27.50
         2                  A#0          29.14
         3                   B0          30.87
         4                   C1          32.70
         5                  C#1          34.65
         6                   D1          36.71
         7                  D#1          38.89
         8                   E1          41.20
         9                   F1          43.65
        10                  F#1          46.25
        11                   G1          49.00
        12                  G#1          51.91
        13                   A1          55.00
        14                  A#1          58.27
        15                   B1          61.74
        16                   C2          65.41
        17                  C#2          69.30
        18                   D2          73.42
        19                  D#2          77.78
        20                   E2          82.41
        21                   F2          87.31
        22                  F#2          92.50
        23                   G2          98.00
        24                  G#2         103.83
        25                   A2         110.00
        26                  A#2         116.54
        27                   B2         123.47
        28                   C3         130.81
        29                  C#3         138.59
        30                   D3         146.83
        31                  D#3         155.56
        32                   E3         164.81
        33                   F3         174.61
        34                  F#3         185.00
        35                   G3         196.00
        36                  G#3         207.65
        37                   A3         220.00
        38                  A#3         233.08
        39                   B3         246.94
        40                   C4         261.63
        41                  C#4         277.18
        42                   D4         293.66
        43                  D#4         311.13
        44                   E4         329.63
        45                   F4         349.23
        46                  F#4         369.99
        47                   G4         392.00
        48                  G#4         415.30
        49                   A4         440.00
        50                  A#4         466.16
        51                   B4         493.88
        52                   C5         523.25
        53                  C#5         554.37
        54                   D5         587.33
        55                  D#5         622.25
        56                   E5         659.26
        57                   F5         698.46
        58                  F#5         739.99
        59                   G5         783.99
        60                  G#5         830.61
        61                   A5         880.00
        62                  A#5         932.33
        63                   B5         987.77
        64                   C6        1046.50
        65                  C#6        1108.73
        66                   D6        1174.66
        67                  D#6        1244.51
        68                   E6        1318.51
        69                   F6        1396.91
        70                  F#6        1479.98
        71                   G6        1567.98
        72                  G#6        1661.22
        73                   A6        1760.00
        74                  A#6        1864.66
        75                   B6        1975.53
        76                   C7        2093.00
        77                  C#7        2217.46
        78                   D7        2349.32
        79                  D#7        2489.02
        80                   E7        2637.02
        81                   F7        2793.83
        82                  F#7        2959.96
        83                   G7        3135.96
        84                  G#7        3322.44
        85                   A7        3520.00
        86                  A#7        3729.31
        87                   B7        3951.07
        88                   C8        4186.01

Creating Demo Songs... (this might take about a minute)

Writing to file pysynth_scale.wav
[1/26]
[5/26]
[9/26]
[13/26]
[17/26]
[21/26]
[25/26]

Writing to file pysynth_anthem.wav
[1/25]
[5/25]
[9/25]
[13/25]
[17/25]
[21/25]
[25/25]

Writing to file pysynth_chopin.wav
[1/29]
[5/29]
[9/29]
[13/29]
[17/29]
[21/29]
[25/29]
[29/29]

Writing to file pysynth_bach_rh.wav
[1/52]
[5/52]
[9/52]
[13/52]
[17/52]
[21/52]
[25/52]
[29/52]
[33/52]
[37/52]
[41/52]
[45/52]
[49/52]
[1/52]
[5/52]
[9/52]
[13/52]
[17/52]
[21/52]
[25/52]
[29/52]
[33/52]
[37/52]
[41/52]
[45/52]
[49/52]

Writing to file pysynth_bach_lh.wav
[1/33]
[5/33]
[9/33]
[13/33]
[17/33]
[21/33]
[25/33]
[29/33]
[33/33]
[1/33]
[5/33]
[9/33]
[13/33]
[17/33]
[21/33]
[25/33]
[29/33]
[33/33]

Mixing files, total length 29.54 s...
0 s
5 s
10 s
15 s
20 s
25 s
63.615u 0.498s 1:06.09 96.9%    0+0k 0+45io 0pf+0w
</pre>

</body>
</html>
